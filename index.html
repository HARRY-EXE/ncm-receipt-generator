<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nepal Can Move Label</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    background: #f2f2f2;
  }

  .label {
    width: 420px;
    background: #fff;
    border: 2px solid #000;
    padding: 10px;
    box-sizing: border-box;
  }

  .header {
    display: flex;
    justify-content: space-between;
    border-bottom: 2px solid #000;
    padding-bottom: 5px;
    font-weight: bold;
  }

  .barcode {
    text-align: center;
    margin: 10px 0;
  }

  .barcode canvas {
    width: 100%;
    height: 60px;
  }

  .logo-section {
    text-align: center;
    border: 1px solid #000;
    padding: 10px;
    box-sizing: border-box;
  }

  .logo-section img {
    width: 245px;
    max-width: 100%;
    height: auto;
  }

  .details {
    display: grid;
    grid-template-columns: 1fr 1fr;
    border: 1px solid #000;
    border-top: none;
    box-sizing: border-box;
  }

  .details div {
    border: 1px solid #000;
    text-align: center;
    padding: 5px;
    font-size: 13px;
    font-weight: bold;
    box-sizing: border-box;
  }

  .order-info {
    border: 1px solid #000;
    text-align: center;
    padding: 5px;
    font-size: 13px;
    box-sizing: border-box;
  }

  .bottom {
    display: flex;
    justify-content: space-between;
    border-top: 1px solid #000;
    padding-top: 5px;
    font-size: 12px;
  }

  .info-qr-section {
    display: flex;
    justify-content: space-between;
    margin-top: 10px;
  }

  .address-container {
    width: 65%;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    gap: 5px;
  }

  .address-block {
    border: 1px solid #000;
    padding: 5px;
    font-size: 12px;
    box-sizing: border-box;
  }

  .qr-left {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    width: 30%;
    border: 1px solid #000;
    padding: 5px;
    gap: 10px;
    box-sizing: border-box;
  }

  .qr-left #footer-qr {
    width: 100px;
    height: 100px;
  }

  .qr-left .signature-img {
    width: 80px;
    height: auto;
  }

  /* Editable text inputs - clean look */
  input.editable-input {
    border: none;
    background: transparent;
    padding: 2px 4px;
    font-size: inherit;
    font-family: inherit;
    width: 100%;
    box-sizing: border-box;
    text-align: center;
  }

  input.editable-input:focus {
    outline: none;
    background-color: #f0f8ff;
  }

  [contenteditable="true"] {
    outline: none;
    cursor: text;
  }

  [contenteditable="true"]:focus {
    background-color: #f0f8ff;
  }
</style>
</head>
<body>

<div class="label" id="label-content">
  <div class="header">
    <div contenteditable="true">Sales_order</div>
    <div contenteditable="true">marketplace</div>
  </div>

  <div class="barcode">
    <canvas id="barcode"></canvas>
  </div>

  <div class="logo-section">
    <img src="logo.png" alt="Logo">
  </div>

  <div class="details">
    <div contenteditable="true">STANDARD</div>
    <div contenteditable="true">1.0 KG</div>
    <div contenteditable="true">WORK</div>
    <div contenteditable="true">PREPAYMENT</div>
    <div contenteditable="true">NRS :</div>
    <div contenteditable="true">COD : 00</div>
  </div>

  <div class="order-info">
    <p><strong>Order Number:</strong>
      <input type="text" id="order-number" class="editable-input" maxlength="16" style="width: 200px;">
    </p>
    <div class="bottom">
      <span>Order Creation Date:
        <input type="text" id="order-date" class="editable-input" style="width: 120px;">
      </span>
      <span>AWB Print Date:
        <input type="text" id="awb-date" class="editable-input" style="width: 130px;">
      </span>
    </div>
  </div>

  <div class="info-qr-section">
    <div class="qr-left">
      <img id="footer-qr" src="" alt="QR Code">
      <img src="sign.png" class="signature-img" alt="Signature">
    </div>

    <div class="address-container">
      <div class="address-block" contenteditable="true">
        <strong>Receiver</strong><br>
        Receiver Name<br>
        Address 1<br>
        Address 2<br>
        Address 3<br>
        Phone: +977 9000000000
      </div>
      <div class="address-block" contenteditable="true">
        <strong>Sender</strong><br>
        Evans Clothing Co.<br>
        Dharan Line,<br>
        Itahari<br>
        Phone: +977 9700462618
      </div>
    </div>
  </div>
</div>

<!-- JsBarcode for barcode -->
<script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js"></script>

<script>
  // Generate random 16-digit order number
  function generateOrderNumber() {
    let orderNumber = '';
    for (let i = 0; i < 16; i++) {
      orderNumber += Math.floor(Math.random() * 10);
    }
    return orderNumber;
  }

  // Function to update barcode
  function updateBarcode(orderNumber) {
    if (orderNumber && orderNumber.length > 0) {
      try {
        JsBarcode("#barcode", orderNumber, {
          format: "CODE128",
          displayValue: false,
          lineColor: "#000",
          width: 2,
          height: 60
        });
      } catch (e) {
        console.error("Error generating barcode:", e);
      }
    }
  }

  // Initialize order number and barcode
  const orderNumber = generateOrderNumber();
  const orderNumberInput = document.getElementById('order-number');
  orderNumberInput.value = orderNumber;
  orderNumberInput.addEventListener('input', function() {
    updateBarcode(this.value);
  });
  updateBarcode(orderNumber);

  // Set today's date for Order Creation and AWB dates
  const today = new Date();
  const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
  const day = today.getDate();
  const month = months[today.getMonth()];
  const year = today.getFullYear();
  document.getElementById('order-date').value = `${day} ${month} ${year}`;
  document.getElementById('awb-date').value = today.toISOString().split('T')[0];

  // Generate QR code
  const qrURL = `https://api.qrserver.com/v1/create-qr-code/?size=120x120&data=https://www.nepalcanmove.com/`;
  document.getElementById('footer-qr').src = qrURL;
</script>

</body>
</html>
